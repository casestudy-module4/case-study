<!DOCTYPE html>
<html lang="vi" class="loading-site no-js">
<head>
    <meta charset="UTF-8"/>
    <link rel="profile" href="http://gmpg.org/xfn/11"/>
    <link rel="pingback" href="https://tetviet.monamedia.net/xmlrpc.php"/>
    <link rel="stylesheet" href="/style/style-products.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">

    <title>Giỏ hàng &#8211; Finest Dana Tết Việt</title>
    <meta name='robots' content='max-image-preview:large'/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

    <th:block th:replace="fragments/link1 :: link1"></th:block>
</head>

<body class="archive paged post-type-archive post-type-archive-product paged-2 post-type-paged-2 theme-flatsome ot-vertical-menu woocommerce-shop woocommerce woocommerce-page woocommerce-no-js translatepress-vi lightbox nav-dropdown-has-arrow nav-dropdown-has-shadow nav-dropdown-has-border">

<a class="skip-link screen-reader-text" href="#main">Skip to content</a>

<div id="wrapper">

    <div th:replace="fragments/header :: header"></div>

    <div class="shop-page-title category-page-title page-title ">
        <div class="page-title-inner flex-row  medium-flex-wrap container">
            <div class="flex-col flex-grow medium-text-center">
                <div class="is-large">
                    <nav class="woocommerce-breadcrumb breadcrumbs uppercase"><a href="/home">Trang chủ</a> <span
                            class="divider">&#47;</span> <a href="/">Giỏ hàng</a>
                    </nav>
                </div>
                <div class="category-filtering category-filter-row show-for-medium">
                    <a href="#" data-open="#shop-sidebar" data-visible-after="true" data-pos="left"
                       class="filter-button uppercase plain">
                        <i class="icon-equalizer"></i>
                        <strong>Lọc</strong>
                    </a>
                    <div class="inline-block">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <main id="main">
        <div class="container mt-4">
            <h2>Giỏ hàng của bạn</h2>
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>Chọn</th>
                    <th>Sản phẩm</th>
                    <th>Giá</th>
                    <th>Số lượng</th>
                    <th>Tổng</th>
                    <th>Hành động</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="item : ${cartItems}">
                    <td>
                        <input type="checkbox" class="select-item" data-id="${item.id}" data-price="${item.quantity * item.priceDetailOrder}">
                    </td>
                    <td th:text="${item.product.name}"></td>
                    <td th:text="${item.product.price} + ' VND'"></td>
                    <td>
                        <form action="/cart/update" method="post">
                            <input type="hidden" name="orderDetailId" th:value="${item.id}">
                            <input type="number" name="quantity" th:value="${item.quantity}" class="form-control" min="1">
                            <button type="submit" class="btn btn-primary btn-sm mt-2">Cập nhật</button>
                        </form>
                    </td>
                    <td th:text="${item.quantity * item.priceDetailOrder} + ' VND'"></td>
                    <td>
                        <form action="/cart/remove" method="post">
                            <input type="hidden" name="orderDetailId" th:value="${item.id}">
                            <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>

            <div class="text-end">
                <h4>
                    Tổng sản phẩm được chọn: <span id="selected-total">0 VND</span>
                </h4>
                <a href="/cart/checkout" class="btn btn-success">Thanh toán</a>
            </div>

        </div>

    </main>

    <div th:replace="fragments/footer :: footer"></div>

</div>

<template id="tp-language" data-tp-language="vi"></template>
<div id="main-menu" class="mobile-sidebar no-scrollbar mfp-hide">


    <div class="sidebar-menu no-scrollbar ">


        <ul class="nav nav-sidebar nav-vertical nav-uppercase" data-tab="1">
            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-448"><a
                    href="/home">Trang chủ</a></li>
            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-450"><a
                    href="#">Giới thiệu</a></li>
            <li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item current_page_item menu-item-449">
                <a href="/products" aria-current="page">Cửa hàng</a></li>
            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-698"><a
                    href="#">Blog</a></li>
            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-451"><a
                    href="#">Liên hệ</a></li>
            <li class="account-item has-icon menu-item">
                <a href="#"
                   class="nav-top-link nav-top-not-logged-in">
    <span class="header-account-title">
    Đăng nhập  </span>
                </a>

            </li>
        </ul>


    </div>


</div>
<div th:replace="fragments/link2 :: link2"></div>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const checkboxes = document.querySelectorAll(".select-item");
        const selectedTotal = document.getElementById("selected-total");

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener("change", function () {
                let total = 0;
                checkboxes.forEach(item => {
                    if (item.checked) {
                        total += parseFloat(item.dataset.price);
                    }
                });
                selectedTotal.textContent = total.toLocaleString('vi-VN') + ' VND';
            });
        });
    });
</script>

</html>
